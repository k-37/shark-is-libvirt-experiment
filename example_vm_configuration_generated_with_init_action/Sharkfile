#!/usr/bin/env bash

################################################
### Options in this section MUST be verified ###
################################################

__original_cloud_image_path='/tmp/debian-12-genericcloud-amd64-20241004-1890.qcow2'
__original_cloud_image_format='qcow2'

# VM name should be unique across all VMs on the current host.
__vm_name='parent_folder_name'

##################################################
### This section is optional for configuration ###
##################################################

__vm_disk_image_directory='/var/lib/libvirt/images'
__vm_disk_image_file_path="${__vm_disk_image_directory}/${__vm_name}.${__original_cloud_image_format}"
__vm_memory=1024
__vm_vcpus=1
__vm_disk="'${__vm_disk_image_file_path}'"
__vm_network='default,model=virtio'
__vm_cloud_init='user-data=user-data'
__libvirt_default_uri='qemu:///system'
__virt_install_command="virt-install --connect '${__libvirt_default_uri}' --import --osinfo detect=on,require=off --name '${__vm_name}' --memory '${__vm_memory}' --vcpus '${__vm_vcpus}' --disk '${__vm_disk}' --network '${__vm_network}' --cloud-init '${__vm_cloud_init}'"
